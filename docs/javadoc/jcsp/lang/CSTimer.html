<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_162) on Wed Apr 25 09:57:43 BST 2018 -->
<title>CSTimer (jcsp alpha-1.1.2 API)</title>
<meta name="date" content="2018-04-25">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="CSTimer (jcsp alpha-1.1.2 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":42,"i4":10,"i5":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../jcsp/lang/CSProcess.html" title="interface in jcsp.lang"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../jcsp/lang/Guard.html" title="class in jcsp.lang"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?jcsp/lang/CSTimer.html" target="_top">Frames</a></li>
<li><a href="CSTimer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">jcsp.lang</div>
<h2 title="Class CSTimer" class="title">Class CSTimer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../jcsp/lang/Guard.html" title="class in jcsp.lang">jcsp.lang.Guard</a></li>
<li>
<ul class="inheritance">
<li>jcsp.lang.CSTimer</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">CSTimer</span>
extends <a href="../../jcsp/lang/Guard.html" title="class in jcsp.lang">Guard</a></pre>
<div class="block">This is a <a href="../../jcsp/lang/Guard.html" title="class in jcsp.lang"><code>Guard</code></a> for setting timeouts in an <a href="../../jcsp/lang/Alternative.html" title="class in jcsp.lang"><code>Alternative</code></a>.
 <H2>Description</H2>
 <TT>CSTimer</TT> is a <a href="../../jcsp/lang/Guard.html" title="class in jcsp.lang"><code>Guard</code></a> for setting timeouts in an
 <a href="../../jcsp/lang/Alternative.html" title="class in jcsp.lang"><code>Alternative</code></a>.  It also provides the current system time
 and can set straight (i.e. committed) timeouts.  The timeouts
 are in terms of <I>absolute time values</I> - not <I>relative delays</I>.
 <P>
 <I>Note: for those familiar with the <I><B>occam</B></I> multiprocessing
 language, </I><TT>CSTimer</TT><I> gives the semantics of the
 </I><TT>TIMER</TT><I> type (including its use as a guard in an
 </I><TT>ALT</TT><I> construct).</I>
 <P>
 Warning: a <TT>CSTimer</TT> records the timeout value for use by an
 <a href="../../jcsp/lang/Alternative.html" title="class in jcsp.lang"><code>Alternative</code></a>.  Therefore, <I>different</I> <TT>CSTimer</TT>s
 must be used by <I>different</I> processes - the same <TT>CSTimer</TT>
 must not be shared.
 <P>
 <I>Implementation note: all </I><TT>CSTimer</TT><I>s currently
 use the same </I><TT>System.currentTimeMillis</TT><I> time.</I>
 </P>
 <H2>Examples</H2>
 The use of a <TT>CSTimer</TT> for setting timeouts on channel input is documented
 in the <a href="../../jcsp/lang/Alternative.html" title="class in jcsp.lang"><code>Alternative</code></a> class (see the examples
 <I>A Fair Multiplexor with a Timeout</I>
 and <I>A Simple Traffic Flow Regulator</I>).
 <P>
 Here, we just show its use for setting committed timeouts.  <TT>Regular</TT>
 generates a regular stream of output on its <TT>out</TT> channel.  The rate
 of output is determined by its <TT>interval</TT> parameter.  Recall that timeouts
 implemented by <TT>CSTimer</TT> are in terms of <I>absolute time values</I>.
 Notice that the sequence of output times maintains
 an arithmetic progression.  Any delays in completing each cycle (e.g. caused by
 the process scheduler or the lateness of the process synchronising with us to accept
 our data) will be compensated for automatically - the output sequence always returns
 to its planned schedule whenever it can.
 <PRE>
 import jcsp.lang.*;
  <I></I>
 public class Regular implements CSProcess {
  <I></I>
   final private ChannelOutput out;
   final private Integer N;
   final private long interval;
  <I></I>
   public Regular (final ChannelOutput out, final int n, final long interval) {
     this.out = out;
     this.N = new Integer (n);
     this.interval = interval;
   }
  <I></I>
   public void run () {
  <I></I>
     final CSTimer tim = new CSTimer ();
     long timeout = tim.read ();       // read the (absolute) time once only
  <I></I>
     while (true) {
       out.write (N);
       timeout += interval;            // set the next (absolute) timeout
       tim.after (timeout);            // wait until that (absolute) timeout
     }
   }
  <I></I>
 }
 </PRE>

 For convenience, a <a href="../../jcsp/lang/CSTimer.html#sleep-long-"><code><TT>sleep</TT></code></a> method that blocks for a specified
 time period (in milliseconds) is also provided.  This has the same semantics as
 <code><TT>java.lang.Thread.sleep</TT></code>.
 [<I>Note:</I> programming a regular sequence of events is a little easier using
 <a href="../../jcsp/lang/CSTimer.html#after-long-"><code><TT>after</TT></code></a> (as in the above) rather than <a href="../../jcsp/lang/CSTimer.html#sleep-long-"><code><TT>sleep</TT></code></a>.]</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../jcsp/lang/Alternative.html" title="class in jcsp.lang"><code>Alternative</code></a>, 
<a href="../../jcsp/lang/Guard.html" title="class in jcsp.lang"><code>Guard</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../jcsp/lang/CSTimer.html#CSTimer--">CSTimer</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">Deprecated Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../jcsp/lang/CSTimer.html#after-long-">after</a></span>(long&nbsp;msecs)</code>
<div class="block">Puts the process to sleep until an absolute time is reached.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../jcsp/lang/CSTimer.html#getAlarm--">getAlarm</a></span>()</code>
<div class="block">Returns the alarm value that has been set by the previous call to
 <a href="../../jcsp/lang/CSTimer.html#setAlarm-long-"><code>setAlarm(long)</code></a>.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../jcsp/lang/CSTimer.html#read--">read</a></span>()</code>
<div class="block">Returns the current system time in msecs.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../jcsp/lang/CSTimer.html#set-long-">set</a></span>(long&nbsp;msecs)</code>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;
<div class="block"><span class="deprecationComment">Use <a href="../../jcsp/lang/CSTimer.html#setAlarm-long-"><code>setAlarm(long)</code></a> - this name caused confusion with
 the idea of setting the current time (a concept that is not supported).</span></div>
</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../jcsp/lang/CSTimer.html#setAlarm-long-">setAlarm</a></span>(long&nbsp;msecs)</code>
<div class="block">Sets the absolute timeout value that will trigger an <TT>Alternative</TT>
 <I>select</I> operation (when this <TT>CSTimer</TT> is one of the guards
 with which that <TT>Alternative</TT> was constructed).</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../jcsp/lang/CSTimer.html#sleep-long-">sleep</a></span>(long&nbsp;msecs)</code>
<div class="block">Puts the process to sleep for a specified time (milliseconds).</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.jcsp.lang.Guard">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;jcsp.lang.<a href="../../jcsp/lang/Guard.html" title="class in jcsp.lang">Guard</a></h3>
<code><a href="../../jcsp/lang/Guard.html#schedule-jcsp.lang.Alternative-">schedule</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="CSTimer--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CSTimer</h4>
<pre>public&nbsp;CSTimer()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setAlarm-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setAlarm</h4>
<pre>public&nbsp;void&nbsp;setAlarm(long&nbsp;msecs)</pre>
<div class="block">Sets the absolute timeout value that will trigger an <TT>Alternative</TT>
 <I>select</I> operation (when this <TT>CSTimer</TT> is one of the guards
 with which that <TT>Alternative</TT> was constructed).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msecs</code> - the absolute timeout value.</dd>
</dl>
</li>
</ul>
<a name="getAlarm--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAlarm</h4>
<pre>public&nbsp;long&nbsp;getAlarm()</pre>
<div class="block">Returns the alarm value that has been set by the previous call to
 <a href="../../jcsp/lang/CSTimer.html#setAlarm-long-"><code>setAlarm(long)</code></a>.</div>
</li>
</ul>
<a name="set-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>set</h4>
<pre>public&nbsp;void&nbsp;set(long&nbsp;msecs)</pre>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;<span class="deprecationComment">Use <a href="../../jcsp/lang/CSTimer.html#setAlarm-long-"><code>setAlarm(long)</code></a> - this name caused confusion with
 the idea of setting the current time (a concept that is not supported).</span></div>
<div class="block">Sets the absolute timeout value that will trigger an <TT>Alternative</TT>
 <I>select</I> operation (when this <TT>CSTimer</TT> is one of the guards
 with which that <TT>Alternative</TT> was constructed).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msecs</code> - the absolute timeout value.</dd>
</dl>
</li>
</ul>
<a name="read--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;long&nbsp;read()</pre>
<div class="block">Returns the current system time in msecs.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the current system time in msecs</dd>
</dl>
</li>
</ul>
<a name="after-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>after</h4>
<pre>public&nbsp;void&nbsp;after(long&nbsp;msecs)</pre>
<div class="block">Puts the process to sleep until an absolute time is reached.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msecs</code> - the absolute time awaited.  Note: if this time has already been reached, this returns straight away.</dd>
</dl>
</li>
</ul>
<a name="sleep-long-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>sleep</h4>
<pre>public&nbsp;void&nbsp;sleep(long&nbsp;msecs)</pre>
<div class="block">Puts the process to sleep for a specified time (milliseconds).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msecs</code> - the length of the sleep period.  Note: if this is negative, this returns straight away.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../jcsp/lang/CSProcess.html" title="interface in jcsp.lang"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../jcsp/lang/Guard.html" title="class in jcsp.lang"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?jcsp/lang/CSTimer.html" target="_top">Frames</a></li>
<li><a href="CSTimer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
